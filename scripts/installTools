#!/bin/bash
# vim: syntax=sh

installGNUScreenWithVerticalSplit(){
  screenVersion=$(echo $($(which screen) --version) | awk '{print $3}' | tr -d [:alpha:][:punct:])
  [ ! $(which screen) ] || [ $screenVersion -ge 40201 ] && exit #exit if higher version already installed
                                                                ##otherwise
  wget http://ftp.gnu.org/gnu/screen/screen-4.2.1.tar.gz && \   ##get it
  tar -xf ~/screen-4.2.1.tar.gz && \                            ##untar it
  mv ~/screen-4.2.1 ~/bin/screen-src && \
  autoreconf ~/bin/screen-src && \                              ##prepare for configuration
  ~/bin/screen-src/configure --enable-colors256 && \            ##connfigure with 256 colours enabled
  make -C ~/bin/screen-src && \                                 ##and make
  cp ~/bin/screen-src/screen ~/bin/                             ##copy binary to user bin

  make clean -C ~/bin/screen-src                                # #remove unnecessary files
  rm -rf ~/comm.h ~/config.h ~/config.log ~/config.status
  rm -rf ~/doc ~/kmapdef.c ~/Makefile  ~/osdef.h
  rm -rf ~/screen-4.2.1.tar.gz ~/term.h
}

installColordiffFromGithub(){
  local address="https://raw.github.com/daveewart/colordiff/current/colordiff.pl"
  [ ! $(which colordiff) ] && \
  wget --no-check-certificate ${address} -O ~/bin/colordiff && chmod +x ~/bin/colordiff
}

installAckGrep(){
  [ -f ~/bin/ack ] && curl http://beyondgrep.com/ack-2.14-single-file > ~/bin/ack && chmod +x ~/bin/ack
}

installClc(){
  [ -f ~/bin/clc ] && printf "#!/bin/bash\nclear && printf '\033[3J'" >> ~/bin/clc && chmod +x ~/bin/clc
}

cloneVundlePluginManager(){
  [ ! -d ~/.vim/bundle/Vundle.vim ] && \
  git clone https://github.com/gmarik/Vundle.vim.git ~/.vim/bundle/Vundle.vim && \
  vim +PluginInstall +qall #this is how to forward commands to vim
}

sshKeyGenerationProcedure(){
  local sshKeyPath="$HOME/.ssh"
  local sshKeyName="id_rsa"

  [ -f $sshKeyPath/$sshKeyName ] && \
    echo ${sshKeyPath}/${sshKeyName} exist, no need to create && exit
  #if noti exist, then we create it
  ssh-keygen -f $sshKeyPath/$sshKeyName -N "" #no passphrase
  cat ${sshKeyPath}/${sshKeyName}.pub >> ${sshKeyPath}/authorized_keys
}


mkdir -p ~/bin #you can add this to your PATH

#comment out thinks you dont want
installGNUScreenWithVerticalSplit
installColordiffFromGithub
installAckGrep
installClc

cloneVundlePluginManager

#sshKeyGenerationProcedure

